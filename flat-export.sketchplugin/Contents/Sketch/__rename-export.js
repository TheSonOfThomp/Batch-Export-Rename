var globalThis=this,global=this;function __skpm_run(e,t){globalThis.context=t;try{var n=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=require("sketch")},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a);t.default=function(e){var t=r.a.getSelectedDocument().selectedLayers;if(0===t.length)r.a.UI.message("No layers are selected.");else{var n=NSAlert.alloc().init();n.setMessageText("Flat Export"),n.addButtonWithTitle("Continue"),n.addButtonWithTitle("Cancel");var a=[{type:"label",id:"caseLabel",value:"Name format:",paddingBottom:-2},{type:"select",id:"selectCase",value:["kebab-case","snake_case","camelCase"],paddingBottom:8},{type:"checkbox",id:"fullName",label:"Use full layer name",value:"full-name",default:!0,paddingBottom:8},{type:"label",id:"prefixLabel",value:"Name prefix:",paddingBottom:-2},{type:"text",id:"prefix",value:"",placeholder:"Prefix",paddingBottom:8},{type:"label",id:"fileFormat",value:"File format:",paddingBottom:-2},{type:"select",id:"selectFormat",value:["svg","png","jpg"],paddingBottom:8}],o=a.length,i=24*o+a.map((function(e){return e.paddingBottom})).reduce((function(e,t){return e+t}),0),l=NSView.alloc().initWithFrame(NSMakeRect(0,0,200,i)),u=24,c=a.map((function(e,t){var n,a,r,o,l,c,s=e.type,d=i-u;return"label"==s?(a=NSMakeRect(0,d,200,24),r=12,o=!1,l=e.value,(c=NSTextField.alloc().initWithFrame(a)).setStringValue(l),c.setBezeled(!1),c.setDrawsBackground(!1),c.setEditable(!1),c.setSelectable(!1),o?c.setFont(NSFont.boldSystemFontOfSize(r)):c.setFont(NSFont.systemFontOfSize(r)),n=c):"select"==s?n=function(e,t){for(var n=NSPopUpButton.alloc().initWithFrame(e),a=0;a<t.length;a++)"--"==t[a]?n.menu().addItem(NSMenuItem.separatorItem()):n.addItemWithTitle(t[a]);return n}(NSMakeRect(0,d,200,24),e.value):"checkbox"==s?n=function(e,t,n,a,r){var o=NSButton.alloc().initWithFrame(e);return o.setButtonType(NSSwitchButton),o.setTitle(t),o.setTag(n),o.setState(a?NSOnState:NSOffState),o.setEnabled(r),o}(NSMakeRect(0,d,200,24),e.label,e.value,e.default,!0):"text"==s&&(n=function(e){var t=e.frame,n=e.size,a=e.bold,r=e.text,o=e.placeholder,i=NSTextField.alloc().initWithFrame(t);return i.setStringValue(r),i.setBezeled(!0),i.setDrawsBackground(!0),i.setEditable(!0),i.setSelectable(!0),i.placeholderString=o,a?i.setFont(NSFont.boldSystemFontOfSize(n)):i.setFont(NSFont.systemFontOfSize(n)),i}({frame:NSMakeRect(0,d,200,24),size:12,text:e.value,placeholder:e.placeholder})),u+=24+e.paddingBottom,n}));if(c.forEach((function(e){l.addSubview(e)})),n.setAccessoryView(l),n.runModal()!==NSAlertFirstButtonReturn)return;var s=a.findIndex((function(e){return"selectCase"===e.id})),d=a.findIndex((function(e){return"prefix"===e.id})),f=a.findIndex((function(e){return"fullName"===e.id})),p=a.findIndex((function(e){return"selectFormat"===e.id})),m=c[s].indexOfSelectedItem(),g=c[d].stringValue(),h=c[f].state(),S=c[p].indexOfSelectedItem(),b=NSOpenPanel.openPanel();if(b.canChooseFiles=!1,b.canChooseDirectories=!0,b.canCreateDirectories=!0,b.runModal()){var y=b.URL().path(),v=t.layers,x=v.map((function(e){return e.name})),F=a[p].value[S];v.forEach((function(e){var t,n=h?e.name:e.name.substring(e.name.lastIndexOf("/")+1,e.name.length);n=""==g?n:"".concat(g,"-").concat(n),0===m?e.name="string"!=typeof(t=n)?"":t.replace(/[\ \\\/\_]/g,"-").toLowerCase():1===m?e.name=function(e){return"string"!=typeof e?"":e.replace(/[\ \\\/\-\–\—]/g,"_").toLowerCase()}(n):2===m&&(e.name=function(e){if("string"!=typeof e)return"";e=e.toLowerCase().split(/[\ \\\/\_\-\–\—]/g);for(var t=0;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")}(n))}));var N={formats:F,output:y};r.a.export(v,N),v.forEach((function(e,t){e.name=x[t]})),r.a.UI.message("Exported ".concat(v.length," layers"))}}}}]);if("default"===e&&"function"==typeof n)n(t);else{if("function"!=typeof n[e])throw new Error('Missing export named "'+e+'". Your command should contain something like `export function " + key +"() {}`.');n[e](t)}}catch(a){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw a;process.emit("uncaughtException",a,"uncaughtException")}}globalThis.onRun=__skpm_run.bind(this,"default");